name: agentos-weekly-proof

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  weekly-proof:
    runs-on: ubuntu-latest
    env:
      PPLX_API_KEY: \${{ secrets.PPLX_API_KEY }}
      PPLX_BASE_URL: \${{ secrets.PPLX_BASE_URL }}
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - name: install
        run: pip install -r requirements.txt
      - name: run weekly proof
        run: PYTHONPATH=src:src/onemind-FSM-Kernel/src python3 tools/weekly_proof_run.py --intent utc_date --roles envoy,scout --require-scout
